/*
* Use this to do a single test, to keep the log file as small as possible 
*/
@isTest
private class TestOneHRBForm {

    static testMethod void myUnitTest() 
    {
        Account acct1 = new Account(name='driver account');
        insert acct1;
        
        Area_of_Residence__c res = new Area_of_Residence__c (Name='Shankill', Area_Code__c='339', CCA__c='1204', City_County__c='D', Tableyear2012__c=true);
        insert res;

        Contact driver = new Contact(AccountId=acct1.Id,lastname='Driver',firstname='apex1',Client_ID__c='ID12345');
        driver.MailingStreet = '3 test screen \ntest area\ntest city';
        driver.MailingCity = 'Dublin';
        driver.X4_Gender__c = 'Male';
        driver.BirthDate = date.valueOf ('1990-01-01');
        driver.X7a_Living_with_whom__c = '1. Alone';
        driver.X7b_Livin_Where__c = '1. sss';
        driver.Area_of_Residence_and_Reg_Code__c = res.id;
        driver.X10a_Nationality__c = '1. dd';
        driver.X10b_Ethnic_Background__c = '1. Irish';
        driver.X11_Employement_Status__c = '1. ddd';
        driver.X12a_Age_left_primary_school__c = 17;
        driver.X12b_Education_highest_level__c = '3. sss';
        insert driver;
        
        Drug_HRB__c testDrug = new Drug_HRB__c (Name='testDrug');
        testDrug.DrugCode__c = '994';
        testDrug.Tableyear2012__c = true;
        insert testDrug;
        
        Drug_HRB__c testDrugNot994 = new Drug_HRB__c (Name='testDrugNot994');
        testDrugNot994.DrugCode__c = '995';
        testDrugNot994.Tableyear2012__c = true;
        insert testDrugNot994;

        HRB_Form__c testTreatment = new HRB_Form__c (Contact__c=driver.id, X16_Date_of_Assessment__c=date.valueOf('2011-01-01'), X37_Date_of_Final_Discharge__c =date.valueOf('2012-12-04'));
 		testTreatment.X21a_Date_This_treatment_started__c = date.valueOf('2011-01-01');
        testTreatment.X34_outcome_for_main_treatment__c = '1. Treatment completed';
        testTreatment.X36_Client_s_Condition_on_discharge__c = '1. stable';
        testTreatment.X33b1_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b12_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b13_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b14_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b15_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b16_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b17_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b18_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b19_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b20_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b21_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b23_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment.X33b28_Date_Commenced__c = date.valueOf('2011-01-02');
        testTreatment.X33c1_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c12_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c13_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c14_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c15_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c16_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c17_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c18_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c19_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c20_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c21_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c23_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33c28_Date_Completed__c = date.valueOf('2011-01-02');
        testTreatment.X33d1_Number_of_Sessions__c = 1;
        testTreatment.X33d12_Number_of_Sessions__c = 1;
        testTreatment.X33d13_Number_of_Sessions__c = 1;
        testTreatment.X33d14_Number_of_Sessions__c = 1;
        testTreatment.X33d15_Number_of_Sessions__c = 1;
        testTreatment.X33d16_Number_of_Sessions__c = 1;
        testTreatment.X33d17_Number_of_Sesions__c = 1;
        testTreatment.X33d18_Number_of_Sessions__c = 1;
        testTreatment.X33d19_Number_of_Sessions__c = 1;
        testTreatment.X33d20_Number_of_Sessions__c = 1;
        testTreatment.X33d21_Number_of_Sessions__c = 1;
        testTreatment.X33d23_Number_of_Sessions__c = 1;
        testTreatment.X33d28_Number_of_Sessions__c = 1;
        testTreatment.X33a_Main_Intervention__c = '1. Brief intervention';
        testTreatment.X29a_Injected_in_past_month__c = '1. Yes';
        testTreatment.X29b_Ever_injected__c = '1. Yes';
        testTreatment.X29c_Age_first_injected__c = 10;
        testTreatment.X30_Ever_shared_any_injecting_equipment__c = '1. Yes';
        testTreatment.X13_Date_of_Referral__c = date.valueOf('2011-01-01');
        testTreatment.X14_Main_Reason_for_referral__c = '4. something';
        testTreatment.X14_Main_Reason_for_Referral_Drug__c = testDrug.id;
        testTreatment.X15_Source_of_referral__c = '1.something';
        testTreatment.X17a_Assessment_outcome__c = '1. something';
        testTreatment.X17b_Assessment_criterion_fulfilled__c = '1. something';
        testTreatment.X17c_Date_assessment_criteria_fulfilled__c = date.valueOf('2011-01-03');
        testTreatment.X18a_Clients_treatment_status__c = '1. something';
        testTreatment.X19_Accepted_place_at_this_centre__c = '1. something';
        testTreatment.X22_Ever_previously_treated_alc_drug__c = '8. something';
        testTreatment.X22_Ever_previously_treated_re_drug__c = '8. something';
        testTreatment.X23_Type_of_contact_with_this_centre__c = '1. something';
        testTreatment.X24a_Age_first_use_any_drug__c = 10;
        testTreatment.X24b_Specify_first_drug_used__c = testDrug.id;
        testTreatment.X25a_Main_substance__c = testDrug.id;
        testTreatment.X25b_Route_of_Admin_Main_sub__c = '2. something';
        testTreatment.X25c_Frequency_of_use_in_last_mth__c = '2. something';
        testTreatment.X25d_Age_at_1st_use__c = 10;
        insert testTreatment;
            
        HRB_Form__c testTreatment2 = new HRB_Form__c (Contact__c=driver.id, X16_Date_of_Assessment__c=date.valueOf('2011-04-05'), X37_Date_of_Final_Discharge__c =date.valueOf('2011-07-04'));
 		testTreatment2.X21a_Date_This_treatment_started__c = date.valueOf('2011-04-06');
        testTreatment2.X34_outcome_for_main_treatment__c = '1. Treatment completed';
        testTreatment2.X36_Client_s_Condition_on_discharge__c = '1. stable';
        testTreatment2.X33b1_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b12_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b13_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b14_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b15_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b16_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b17_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b18_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b19_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b20_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b21_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b23_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33b28_Date_Commenced__c = date.valueOf('2011-04-06');
        testTreatment2.X33c1_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c12_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c13_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c14_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c15_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c16_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c17_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c18_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c19_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c20_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c21_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c23_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33c28_Date_Completed__c = date.valueOf('2011-07-04');
        testTreatment2.X33d1_Number_of_Sessions__c = 1;
        testTreatment2.X33d12_Number_of_Sessions__c = 1;
        testTreatment2.X33d13_Number_of_Sessions__c = 1;
        testTreatment2.X33d14_Number_of_Sessions__c = 1;
        testTreatment2.X33d15_Number_of_Sessions__c = 1;
        testTreatment2.X33d16_Number_of_Sessions__c = 1;
        testTreatment2.X33d17_Number_of_Sesions__c = 1;
        testTreatment2.X33d18_Number_of_Sessions__c = 1;
        testTreatment2.X33d19_Number_of_Sessions__c = 1;
        testTreatment2.X33d20_Number_of_Sessions__c = 1;
        testTreatment2.X33d21_Number_of_Sessions__c = 1;
        testTreatment2.X33d23_Number_of_Sessions__c = 1;
        testTreatment2.X33d28_Number_of_Sessions__c = 1;
        testTreatment2.X33a_Main_Intervention__c = '1. Brief intervention';
        testTreatment2.X29a_Injected_in_past_month__c = '1. Yes';
        testTreatment2.X29b_Ever_injected__c = '1. Yes';
        testTreatment2.X29c_Age_first_injected__c = 10;
        testTreatment2.X30_Ever_shared_any_injecting_equipment__c = '1. Yes';
        testTreatment2.X13_Date_of_Referral__c = date.valueOf('2011-04-05');
        testTreatment2.X14_Main_Reason_for_referral__c = '4. something';
        testTreatment2.X14_Main_Reason_for_Referral_Drug__c = testDrug.id;
        testTreatment2.X15_Source_of_referral__c = '1.something';
        testTreatment2.X17a_Assessment_outcome__c = '1. something';
        testTreatment2.X17b_Assessment_criterion_fulfilled__c = '1. something';
        testTreatment2.X17c_Date_assessment_criteria_fulfilled__c = date.valueOf('2011-04-05');
        testTreatment2.X18a_Clients_treatment_status__c = '1. something';
        testTreatment2.X19_Accepted_place_at_this_centre__c = '1. something';
        testTreatment2.X22_Ever_previously_treated_alc_drug__c = '8. something';
        testTreatment2.X22_Ever_previously_treated_re_drug__c = '8. something';
        testTreatment2.X23_Type_of_contact_with_this_centre__c = '1. something';
        testTreatment2.X24a_Age_first_use_any_drug__c = 10;
        testTreatment2.X24b_Specify_first_drug_used__c = testDrug.id;
        testTreatment2.X25a_Main_substance__c = testDrug.id;
        testTreatment2.X25b_Route_of_Admin_Main_sub__c = '2. something';
        testTreatment2.X25c_Frequency_of_use_in_last_mth__c = '2. something';
        testTreatment2.X25d_Age_at_1st_use__c = 10;
        insert testTreatment2;
        
        HRB_Form__c testTreatment3 = new HRB_Form__c (Contact__c=driver.id, X16_Date_of_Assessment__c=date.valueOf('2011-5-05'), X37_Date_of_Final_Discharge__c =date.valueOf('2012-12-04'));
 		testTreatment3.X21a_Date_This_treatment_started__c = date.valueOf('2011-05-06');
        testTreatment3.X34_outcome_for_main_treatment__c = '1. Treatment completed';
        testTreatment3.X36_Client_s_Condition_on_discharge__c = '1. stable';
        testTreatment3.X33b1_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b12_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b13_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b14_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b15_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b16_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b17_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b18_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b19_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b20_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b21_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b23_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33b28_Date_Commenced__c = date.valueOf('2011-05-06');
        testTreatment3.X33c1_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c12_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c13_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c14_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c15_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c16_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c17_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c18_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c19_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c20_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c21_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c23_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33c28_Date_Completed__c = date.valueOf('2011-05-07');
        testTreatment3.X33d1_Number_of_Sessions__c = 1;
        testTreatment3.X33d12_Number_of_Sessions__c = 1;
        testTreatment3.X33d13_Number_of_Sessions__c = 1;
        testTreatment3.X33d14_Number_of_Sessions__c = 1;
        testTreatment3.X33d15_Number_of_Sessions__c = 1;
        testTreatment3.X33d16_Number_of_Sessions__c = 1;
        testTreatment3.X33d17_Number_of_Sesions__c = 1;
        testTreatment3.X33d18_Number_of_Sessions__c = 1;
        testTreatment3.X33d19_Number_of_Sessions__c = 1;
        testTreatment3.X33d20_Number_of_Sessions__c = 1;
        testTreatment3.X33d21_Number_of_Sessions__c = 1;
        testTreatment3.X33d23_Number_of_Sessions__c = 1;
        testTreatment3.X33d28_Number_of_Sessions__c = 1;
        testTreatment3.X33a_Main_Intervention__c = '1. Brief intervention';
        testTreatment3.X29a_Injected_in_past_month__c = '1. Yes';
        testTreatment3.X29b_Ever_injected__c = '1. Yes';
        testTreatment3.X29c_Age_first_injected__c = 10;
        testTreatment3.X30_Ever_shared_any_injecting_equipment__c = '1. Yes';
        testTreatment3.X13_Date_of_Referral__c = date.valueOf('2011-05-03');
        testTreatment3.X14_Main_Reason_for_referral__c = '4. something';
        testTreatment3.X14_Main_Reason_for_Referral_Drug__c = testDrug.id;
        testTreatment3.X15_Source_of_referral__c = '1.something';
        testTreatment3.X17a_Assessment_outcome__c = '1. something';
        testTreatment3.X17b_Assessment_criterion_fulfilled__c = '1. something';
        testTreatment3.X17c_Date_assessment_criteria_fulfilled__c = date.valueOf('2011-05-06');
        testTreatment3.X18a_Clients_treatment_status__c = '1. something';
        testTreatment3.X19_Accepted_place_at_this_centre__c = '1. something';
        testTreatment3.X22_Ever_previously_treated_alc_drug__c = '8. something';
        testTreatment3.X22_Ever_previously_treated_re_drug__c = '8. something';
        testTreatment3.X23_Type_of_contact_with_this_centre__c = '1. something';
        testTreatment3.X24a_Age_first_use_any_drug__c = 10;
        testTreatment3.X24b_Specify_first_drug_used__c = testDrug.id;
        testTreatment3.X25a_Main_substance__c = testDrug.id;
        testTreatment3.X25b_Route_of_Admin_Main_sub__c = '2. something';
        testTreatment3.X25c_Frequency_of_use_in_last_mth__c = '2. something';
        testTreatment3.X25d_Age_at_1st_use__c = 10;
        insert testTreatment3;
        
        HRB_Form__c testTreatment4 = new HRB_Form__c (Contact__c=driver.id, X16_Date_of_Assessment__c=date.valueOf('2011-10-05'), X37_Date_of_Final_Discharge__c =date.valueOf('2012-01-09'));
 		testTreatment4.X21a_Date_This_treatment_started__c = date.valueOf('2011-10-06');
        testTreatment4.X34_outcome_for_main_treatment__c = '1. Treatment completed';
        testTreatment4.X33b1_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b12_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b13_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b14_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b15_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b16_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b17_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b18_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b19_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b20_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b21_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b23_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33b28_Date_Commenced__c = date.valueOf('2011-10-06');
        testTreatment4.X33c1_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c12_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c13_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c14_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c15_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c16_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c17_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c18_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c19_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c20_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c21_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c23_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33c28_Date_Completed__c = date.valueOf('2011-12-06');
        testTreatment4.X33d1_Number_of_Sessions__c = 1;
        testTreatment4.X33d12_Number_of_Sessions__c = 1;
        testTreatment4.X33d13_Number_of_Sessions__c = 1;
        testTreatment4.X33d14_Number_of_Sessions__c = 1;
        testTreatment4.X33d15_Number_of_Sessions__c = 1;
        testTreatment4.X33d16_Number_of_Sessions__c = 1;
        testTreatment4.X33d17_Number_of_Sesions__c = 1;
        testTreatment4.X33d18_Number_of_Sessions__c = 1;
        testTreatment4.X33d19_Number_of_Sessions__c = 1;
        testTreatment4.X33d20_Number_of_Sessions__c = 1;
        testTreatment4.X33d21_Number_of_Sessions__c = 1;
        testTreatment4.X33d23_Number_of_Sessions__c = 1;
        testTreatment4.X33d28_Number_of_Sessions__c = 1;
        testTreatment4.X33a_Main_Intervention__c = '1. Brief intervention';
        testTreatment4.X29a_Injected_in_past_month__c = '1. Yes';
        testTreatment4.X29b_Ever_injected__c = '1. Yes';
        testTreatment4.X29c_Age_first_injected__c = 10;
        testTreatment4.X30_Ever_shared_any_injecting_equipment__c = '1. Yes';
        testTreatment4.X36_Client_s_Condition_on_discharge__c = '1. Stable';
        testTreatment4.X13_Date_of_Referral__c = date.valueOf('2011-10-05');
        testTreatment4.X14_Main_Reason_for_referral__c = '4. something';
        testTreatment4.X14_Main_Reason_for_Referral_Drug__c = testDrug.id;
        testTreatment4.X15_Source_of_referral__c = '1.something';
        testTreatment4.X17a_Assessment_outcome__c = '1. something';
        testTreatment4.X17b_Assessment_criterion_fulfilled__c = '1. something';
        testTreatment4.X17c_Date_assessment_criteria_fulfilled__c = date.valueOf('2011-10-05');
        testTreatment4.X18a_Clients_treatment_status__c = '1. something';
        testTreatment4.X19_Accepted_place_at_this_centre__c = '1. something';
        testTreatment4.X22_Ever_previously_treated_alc_drug__c = '8. something';
        testTreatment4.X22_Ever_previously_treated_re_drug__c = '8. something';
        testTreatment4.X23_Type_of_contact_with_this_centre__c = '1. something';
        testTreatment4.X24a_Age_first_use_any_drug__c = 10;
        testTreatment4.X24b_Specify_first_drug_used__c = testDrug.id;
        testTreatment4.X25a_Main_substance__c = testDrug.id;
        testTreatment4.X25b_Route_of_Admin_Main_sub__c = '2. something';
        testTreatment4.X25c_Frequency_of_use_in_last_mth__c = '2. something';
        testTreatment4.X25d_Age_at_1st_use__c = 10;
        insert testTreatment4;
        
        HRB_Form__c testTreatment5 = new HRB_Form__c (Contact__c=driver.id, X16_Date_of_Assessment__c=date.valueOf('2011-01-01'), X37_Date_of_Final_Discharge__c =date.valueOf('2011-08-08'));
 		testTreatment5.X21a_Date_This_treatment_started__c = date.valueOf('2011-01-01');
        testTreatment5.X34_outcome_for_main_treatment__c = '1. Treatment completed';
        testTreatment5.X33b1_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b12_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b13_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b14_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b15_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b16_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b17_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b18_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b19_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b20_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b21_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b23_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33b28_Date_Commenced__c = date.valueOf('2011-01-01');
        testTreatment5.X33c1_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c12_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c13_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c14_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c15_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c16_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c17_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c18_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c19_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c20_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c21_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c23_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33c28_Date_Completed__c = date.valueOf('2011-08-08');
        testTreatment5.X33d1_Number_of_Sessions__c = 1;
        testTreatment5.X33d12_Number_of_Sessions__c = 1;
        testTreatment5.X33d13_Number_of_Sessions__c = 1;
        testTreatment5.X33d14_Number_of_Sessions__c = 1;
        testTreatment5.X33d15_Number_of_Sessions__c = 1;
        testTreatment5.X33d16_Number_of_Sessions__c = 1;
        testTreatment5.X33d17_Number_of_Sesions__c = 1;
        testTreatment5.X33d18_Number_of_Sessions__c = 1;
        testTreatment5.X33d19_Number_of_Sessions__c = 1;
        testTreatment5.X33d20_Number_of_Sessions__c = 1;
        testTreatment5.X33d21_Number_of_Sessions__c = 1;
        testTreatment5.X33d23_Number_of_Sessions__c = 1;
        testTreatment5.X33d28_Number_of_Sessions__c = 1;
        testTreatment5.X33a_Main_Intervention__c = '1. Brief intervention';
        testTreatment5.X29a_Injected_in_past_month__c = '1. Yes';
        testTreatment5.X29b_Ever_injected__c = '1. Yes';
        testTreatment5.X29c_Age_first_injected__c = 10;
        testTreatment5.X30_Ever_shared_any_injecting_equipment__c = '1. Yes';
        testTreatment5.X36_Client_s_Condition_on_discharge__c = '1. Stable';
        testTreatment5.X13_Date_of_Referral__c = date.valueOf('2011-01-01');
        testTreatment5.X14_Main_Reason_for_referral__c = '4. something';
        testTreatment5.X14_Main_Reason_for_Referral_Drug__c = testDrugNot994.id;
        testTreatment5.X15_Source_of_referral__c = '1.something';
        testTreatment5.X17a_Assessment_outcome__c = '1. something';
        testTreatment5.X17b_Assessment_criterion_fulfilled__c = '1. something';
        testTreatment5.X17c_Date_assessment_criteria_fulfilled__c = date.valueOf('2011-01-01');
        testTreatment5.X18a_Clients_treatment_status__c = '1. something';
        testTreatment5.X19_Accepted_place_at_this_centre__c = '1. something';
        testTreatment5.X22_Ever_previously_treated_alc_drug__c = '8. something';
        testTreatment5.X22_Ever_previously_treated_re_drug__c = '8. something';
        testTreatment5.X23_Type_of_contact_with_this_centre__c = '1. something';
        testTreatment5.X24a_Age_first_use_any_drug__c = 10;
        testTreatment5.X24b_Specify_first_drug_used__c = testDrugNot994.id;
        testTreatment5.X25a_Main_substance__c = testDrugNot994.id;
        testTreatment5.X25b_Route_of_Admin_Main_sub__c = '2. something';
        testTreatment5.X25c_Frequency_of_use_in_last_mth__c = '2. something';
        testTreatment5.X25d_Age_at_1st_use__c = 10;
        insert testTreatment5;
        
        HRB_Form__c t5 = [select ExitDate__c, X14_Main_Reason_for_Referral_Drug__r.DrugCode__c, X17a_Assessment_outcome__c, X17b_Assessment_criterion_fulfilled__c, X18a_Clients_treatment_status__c, X19_Accepted_place_at_this_centre__c from HRB_Form__c where id=:testTreatment5.id limit 1];
        system.debug ('Exit date is: ' + t5.ExitDate__c);
        system.debug ('X14_Main_Reason_for_Referral_Drug__r.DrugCode__c is: ' + t5.X14_Main_Reason_for_Referral_Drug__r.DrugCode__c);

        HRB_Report__c params5 = new HRB_Report__c (Period__c = 'Quarter 3', Year__c = 2011, Type_of_report__c = 'Only clients who entered before the reporting period and exited during the report period');
        insert params5;
                

 	    ApexPages.StandardController treatmentController = new ApexPages.StandardController(params5);        
        AddTreatmentToReport hrbReport = new AddTreatmentToReport(treatmentController);
 		hrbReport.Initialise ();
 
        HRBReportController hrb = new HRBReportController(params5);
        HRB_Form__c[]  treatments = hrb.getTreatmentsWithClients();
  		System.assert(treatments.size() > 0);
    }
}