<apex:page standardController="Care_Plan_Objective__c" extensions="CarePlanObjectiveCreation" title="Create Care Plan Objective" sidebar="false" showheader="false">
   <apex:pageMessages />
  <Script type="text/javascript">
    function closeGoal() 
    {
        window.opener.refreshGoalList();
        window.close();
        return true;
    }
  </Script>
    <apex:form id="goal">
        <apex:pageBlock title="Record Care Plan Objective" mode="edit">
            <apex:pageBlockSection title="Details" columns="1">
                <apex:inputField value="{!Care_Plan_Objective__c.Area__c}" />
                <apex:inputField value="{!Care_Plan_Objective__c.Name}" required="true"/>
                <apex:repeat value="{!goalHeaderFields}" var="oneField">
                    <apex:inputfield value="{!goal[oneField.fieldPath]}" />
                </apex:repeat>
                <hr/>
                <apex:repeat value="{!goalFields}" var="oneField">
                    <apex:inputfield value="{!goal[oneField.fieldPath]}" />
                </apex:repeat>
            </apex:pageBlockSection>
            <apex:pageBlockButtons >
                <apex:commandButton value="Save" action="{!Save}" oncomplete="closeGoal()" rerender="goal"/>
                <apex:commandButton value="Cancel" action="{!Cancel}" onclick="closeGoal()" />
            </apex:pageBlockButtons>
        </apex:pageBlock>
    </apex:form> 
</apex:page>